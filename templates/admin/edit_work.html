{% extends 'base.html' %}
{% block content %}
<div class="layout">
    <aside class="sidebar">
        <h3 class="sidebar-title">Admin Panel</h3>
        <nav class="sidebar-nav">
            <a href="{% url 'admin_dashboard' %}" class="sidebar-link">Dashboard</a>
            <a href="{% url 'add_employee' %}" class="sidebar-link">Add Employee</a>
            <a href="{% url 'assign_work' %}" class="sidebar-link">Assign Work</a>
            <a href="{% url 'notice_list' %}" class="sidebar-link">Notice Requests</a>
            <a href="{% url 'attendance_view' %}" class="sidebar-link">Attendance</a>
        </nav>
    </aside>

    <section class="content">
        <div class="card">
            <h3 class="card-title">Edit Work: {{ assignment.title }}</h3>

            <form method="post">
                {% csrf_token %}

                {# keep hidden fields if any #}
                {% for hidden in form.hidden_fields %}
                    {{ hidden }}
                {% endfor %}

                {% if form.non_field_errors %}
                    <div class="msg-area">
                        {% for err in form.non_field_errors %}
                            <p class="msg">{{ err }}</p>
                        {% endfor %}
                    </div>
                {% endif %}

                <div class="form-grid" style="grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:18px;">
                    {# LEFT: tasker + due date #}
                    <div>
                        <div class="form-group">
                            <label>{{ form.tasker.label }}</label>
                            {{ form.tasker }}
                            {% if form.tasker.errors %}
                                <div class="field-error">{{ form.tasker.errors|striptags }}</div>
                            {% endif %}
                        </div>

                        <div class="form-group">
                            <label>{{ form.due_date.label }}</label>
                            {{ form.due_date }}
                            {% if form.due_date.errors %}
                                <div class="field-error">{{ form.due_date.errors|striptags }}</div>
                            {% endif %}
                        </div>
                    </div>

                    {# RIGHT: title + description + status #}
                    <div>
                        <div class="form-group">
                            <label>{{ form.title.label }}</label>
                            {{ form.title }}
                            {% if form.title.errors %}
                                <div class="field-error">{{ form.title.errors|striptags }}</div>
                            {% endif %}
                        </div>

                        <div class="form-group">
                            <label>{{ form.description.label }}</label>
                            {{ form.description }}
                            {% if form.description.errors %}
                                <div class="field-error">{{ form.description.errors|striptags }}</div>
                            {% endif %}
                        </div>

                        {% if form.status %}
                        <div class="form-group">
                            <label>{{ form.status.label }}</label>
                            {{ form.status }}
                            {% if form.status.errors %}
                                <div class="field-error">{{ form.status.errors|striptags }}</div>
                            {% endif %}
                        </div>
                        {% endif %}
                    </div>
                </div>

                <div style="margin-top:12px;">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </section>
</div>
{% endblock %}
